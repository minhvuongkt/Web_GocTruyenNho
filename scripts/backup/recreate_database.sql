"-- Script tự động tạo từ script extract-data.ts\n-- Ngày tạo: 2025-04-30T11:40:36.565Z\n-- Lưu ý: Chạy script này sẽ XÓA dữ liệu hiện có và thay thế bằng dữ liệu sao lưu\n\n-- Tạo lại enum types\nDO $$\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'user_role') THEN\n    CREATE TYPE user_role AS ENUM ('user', 'admin');\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'content_type') THEN\n    CREATE TYPE content_type AS ENUM ('manga', 'novel');\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'status') THEN\n    CREATE TYPE status AS ENUM ('ongoing', 'completed', 'hiatus');\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'payment_method') THEN\n    CREATE TYPE payment_method AS ENUM ('bank_transfer', 'credit_card', 'e_wallet', 'payos');\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'payment_status') THEN\n    CREATE TYPE payment_status AS ENUM ('pending', 'completed', 'failed');\n  END IF;\n  \n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'ad_position') THEN\n    CREATE TYPE ad_position AS ENUM ('banner', 'sidebar', 'popup');\n  END IF;\nEND\n$$;\n\n-- Xóa dữ liệu hiện có để tránh conflict\nTRUNCATE TABLE unlocked_chapters CASCADE;\nTRUNCATE TABLE user_favorites CASCADE;\nTRUNCATE TABLE reading_history CASCADE;\nTRUNCATE TABLE reports CASCADE;\nTRUNCATE TABLE comments CASCADE;\nTRUNCATE TABLE chapter_content CASCADE;\nTRUNCATE TABLE chapters CASCADE;\nTRUNCATE TABLE content_genres CASCADE;\nTRUNCATE TABLE content CASCADE;\nTRUNCATE TABLE translation_groups CASCADE;\nTRUNCATE TABLE authors CASCADE;\nTRUNCATE TABLE genres CASCADE;\nTRUNCATE TABLE payments CASCADE;\nTRUNCATE TABLE advertisements CASCADE;\nTRUNCATE TABLE payment_settings CASCADE;\nTRUNCATE TABLE users CASCADE;\n\n-- Thiết lập sequence cho từng bảng\n\n-- Đoạn script dưới đây sẽ được tự động tạo từ dữ liệu đã trích xuất...\n-- Bạn có thể dùng tool sau để tạo INSERT statement từ file JSON đã sao lưu:\n-- https://www.convertjson.com/json-to-sql.htm\n"